---
import "./NewsList.scss";
import type { News } from "../../data/news";

type Props = { news: News[] };
const { news } = Astro.props;

const sorted = [...news].sort(
  (a, b) => new Date(a.datetime).getTime() - new Date(b.datetime).getTime(),
);

const fmt = new Intl.DateTimeFormat("ja-JP", {
  year: "numeric",
  month: "2-digit",
  day: "2-digit",
  weekday: "short",
  hour: "2-digit",
  minute: "2-digit",
});
---

<section class="newses">
  {
    sorted.map((s) => {
      const dt = new Date(s.datetime);
      return (
        <article class="news">
          <div class="news__meta">
            <time class="news__datetime" datetime={s.datetime}>
              {fmt.format(dt)}
            </time>
          </div>

          <h2 class="news__title">{s.title}</h2>

          {s.imgPath && (
            <img
              class="news__img"
              src={s.imgPath}
              alt=""
              loading="lazy"
            />
          )}

          {s.details && <p class="news__details">{s.details}</p>}

          {s.link && (
            <a
              class="news__link"
              href={s.link}
              target="_blank"
              rel="noopener noreferrer"
            >
              詳細を見る
            </a>
          )}
        </article>
      );
    })
  }
</section>
